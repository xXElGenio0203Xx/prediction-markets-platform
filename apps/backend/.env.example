# ============================================================================
# MONOREPO BACKEND ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env and fill in your actual credentials
# See CREDENTIALS_SETUP_GUIDE.md for detailed setup instructions
# ============================================================================

# Environment (development | production | test)
NODE_ENV=development

# Server
PORT=8080

# ============================================================================
# SUPABASE - PostgreSQL Database (REQUIRED)
# ============================================================================
# Sign up at: https://supabase.com
# Replace [YOUR_PROJECT_REF], [YOUR_DB_PASSWORD], and [REGION] with your values
# Example region: aws-0-us-east-1

# Production: Use connection pooler (port 6543) with pgbouncer=true
DATABASE_URL=postgresql://postgres.[YOUR_PROJECT_REF]:[YOUR_DB_PASSWORD]@[REGION].pooler.supabase.com:6543/postgres?pgbouncer=true

# Development/Migrations: Use direct connection (port 5432)
DIRECT_URL=postgresql://postgres.[YOUR_PROJECT_REF]:[YOUR_DB_PASSWORD]@[REGION].pooler.supabase.com:5432/postgres

# ============================================================================
# UPSTASH - Redis (REQUIRED)
# ============================================================================
# Sign up at: https://upstash.com
# Create a Redis database and copy the connection string
# Format: rediss://default:[PASSWORD]@[ENDPOINT].upstash.io:6379

REDIS_URL=rediss://default:[YOUR_REDIS_PASSWORD]@[YOUR_ENDPOINT].upstash.io:6379

# ============================================================================
# JWT SECRETS (REQUIRED)
# ============================================================================
# Generate secure secrets with: openssl rand -base64 32
# IMPORTANT: Run the command TWICE to get TWO DIFFERENT secrets!
# Never use the same value for both JWT_SECRET and JWT_REFRESH_SECRET

JWT_SECRET=[GENERATE_WITH_OPENSSL_RAND_BASE64_32]
JWT_REFRESH_SECRET=[GENERATE_WITH_OPENSSL_RAND_BASE64_32_DIFFERENT_VALUE]
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ============================================================================
# CORS CONFIGURATION (REQUIRED)
# ============================================================================
# Comma-separated list of allowed origins
# Development: http://localhost:5173,http://localhost:3000
# Production: https://app.yourdomain.com

CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# ============================================================================
# OPTIONAL SERVICES
# ============================================================================

# Sentry - Error Monitoring (Optional)
# Sign up at: https://sentry.io
# Create a Node.js project and copy the DSN
# Format: https://[KEY]@[ORG].ingest.sentry.io/[PROJECT_ID]
SENTRY_DSN=

# Resend - Transactional Emails (Optional)
# Sign up at: https://resend.com
# Create an API key (starts with 're_')
RESEND_API_KEY=

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================

# WebSocket
WS_HEARTBEAT_INTERVAL=25000
WS_IDLE_TIMEOUT=30000

# Rate Limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000
WS_RATE_LIMIT_MAX=10
WS_RATE_LIMIT_WINDOW_MS=60000

# Logging
LOG_LEVEL=info
